# HÆ°á»›ng dáº«n Sá»­ dá»¥ng TÃ­nh nÄƒng Thá»‘ng KÃª Chi TiÃªu Theo Tuáº§n

## Giá»›i thiá»‡u
TÃ­nh nÄƒng "Thá»‘ng kÃª chi tiÃªu theo tuáº§n" cho phÃ©p báº¡n theo dÃµi vÃ  phÃ¢n tÃ­ch chi tiÃªu hÃ ng tuáº§n má»™t cÃ¡ch chi tiáº¿t. Báº¡n cÃ³ thá»ƒ xem biá»ƒu Ä‘á»“ so sÃ¡nh thu nháº­p vÃ  chi tiÃªu, phÃ¢n bá»‘ chi tiÃªu theo danh má»¥c, vÃ  xem chi tiáº¿t tá»«ng giao dá»‹ch.

## CÃ¡ch Truy Cáº­p

### CÃ¡ch 1: Tá»« Menu BÃ¡o CÃ¡o
1. Nháº¥p vÃ o menu **"BÃ¡o cÃ¡o"** trong thanh bÃªn trÃ¡i
2. TrÃªn trang bÃ¡o cÃ¡o, trong pháº§n **"Thá»‘ng kÃª chi tiÃªu"**, nháº¥p nÃºt **"Trong tuáº§n"**
3. Trang sáº½ chuyá»ƒn Ä‘áº¿n **"Thá»‘ng kÃª chi tiÃªu theo tuáº§n"**

### CÃ¡ch 2: Trá»±c tiáº¿p tá»« URL
Báº¡n cÅ©ng cÃ³ thá»ƒ truy cáº­p trá»±c tiáº¿p báº±ng URL:
```
/views/thongke_chi_tieu_tuan_main.php
```

## CÃ¡c TÃ­nh NÄƒng

### 1. Chá»n NÄƒm vÃ  ThÃ¡ng
- Sá»­ dá»¥ng dropdown **"Chá»n nÄƒm"** Ä‘á»ƒ chá»n nÄƒm báº¡n muá»‘n xem
- Sá»­ dá»¥ng dropdown **"Chá»n thÃ¡ng"** Ä‘á»ƒ chá»n thÃ¡ng cá»¥ thá»ƒ
- Nháº¥p **"Xem thá»‘ng kÃª"** hoáº·c dropdown sáº½ tá»± Ä‘á»™ng cáº­p nháº­t khi báº¡n chá»n

### 2. Báº£ng Thá»‘ng KÃª Tuáº§n
Báº£ng hiá»ƒn thá»‹ thÃ´ng tin cho 4 tuáº§n trong thÃ¡ng:

| Cá»™t | MÃ´ táº£ |
|-----|-------|
| **Tuáº§n** | Tuáº§n 1, Tuáº§n 2, Tuáº§n 3 hoáº·c Tuáº§n 4 |
| **Thu nháº­p** | Tá»•ng tiá»n thu nháº­p trong tuáº§n (mÃ u xanh) |
| **Chi tiÃªu** | Tá»•ng tiá»n chi tiÃªu trong tuáº§n (mÃ u Ä‘á») |
| **ChÃªnh lá»‡ch** | Hiá»‡u giá»¯a thu nháº­p vÃ  chi tiÃªu |
| **Chi tiáº¿t** | NÃºt Ä‘á»ƒ xem chi tiáº¿t giao dá»‹ch |

**Giáº£i thÃ­ch:**
- **Tiáº¿t kiá»‡m**: Thu nháº­p > Chi tiÃªu (chÃªnh lá»‡ch dÆ°Æ¡ng, hiá»ƒn thá»‹ xanh)
- **ThÃ¢u chi**: Thu nháº­p < Chi tiÃªu (chÃªnh lá»‡ch Ã¢m, hiá»ƒn thá»‹ Ä‘á»)

### 3. HÃ ng Tá»•ng Cá»™ng
HÃ ng cuá»‘i cÃ¹ng cá»§a báº£ng hiá»ƒn thá»‹ **tá»•ng cá»™ng** cá»§a thÃ¡ng:
- Tá»•ng thu nháº­p toÃ n thÃ¡ng
- Tá»•ng chi tiÃªu toÃ n thÃ¡ng
- ChÃªnh lá»‡ch toÃ n thÃ¡ng

### 4. Biá»ƒu Äá»“ Chi TiÃªu Tuáº§n
Biá»ƒu Ä‘á»“ cá»™t so sÃ¡nh:
- **MÃ u xanh**: Thu nháº­p theo tá»«ng tuáº§n
- **MÃ u Ä‘á»**: Chi tiÃªu theo tá»«ng tuáº§n

Biá»ƒu Ä‘á»“ giÃºp báº¡n dá»… dÃ ng nhÃ¬n tháº¥y xu hÆ°á»›ng chi tiÃªu vÃ  thu nháº­p theo tá»«ng tuáº§n.

## Xem Chi Tiáº¿t Tuáº§n

### CÃ¡ch Truy Cáº­p
Nháº¥p vÃ o nÃºt **"ğŸ“‹"** (Chi tiáº¿t) á»Ÿ cuá»‘i hÃ ng tuáº§n báº¡n muá»‘n xem.

### ThÃ´ng Tin Hiá»ƒn Thá»‹

#### Tháº» ThÃ´ng Tin TÃ³m Táº¯t
Hiá»ƒn thá»‹ 5 tháº» thÃ´ng tin:
1. **ThÃ¡ng**: ThÃ¡ng vÃ  nÄƒm Ä‘Æ°á»£c chá»n
2. **Tuáº§n**: TÃªn tuáº§n (Tuáº§n 1-4)
3. **Thu nháº­p**: Tá»•ng thu nháº­p tuáº§n
4. **Chi tiÃªu**: Tá»•ng chi tiÃªu tuáº§n
5. **ChÃªnh lá»‡ch**: Hiá»‡u sá»‘ vÃ  tÃ¬nh tráº¡ng tiáº¿t kiá»‡m/thÃ¢u chi

#### Danh SÃ¡ch Chi TiÃªu Chi Tiáº¿t
Báº£ng liá»‡t kÃª táº¥t cáº£ cÃ¡c giao dá»‹ch chi tiÃªu trong tuáº§n:

| Cá»™t | MÃ´ táº£ |
|-----|-------|
| **NgÃ y giao dá»‹ch** | NgÃ y thá»±c hiá»‡n giao dá»‹ch |
| **Danh má»¥c** | Danh má»¥c chi tiÃªu (vÃ­ dá»¥: Ä‚n uá»‘ng, Mua sáº¯m, v.v.) |
| **Sá»‘ tiá»n** | Sá»‘ tiá»n chi tiÃªu (hiá»ƒn thá»‹ mÃ u Ä‘á») |
| **Ghi chÃº** | Ghi chÃº thÃªm vá» giao dá»‹ch |

**LÆ°u Ã½**: 
- Dá»¯ liá»‡u Ä‘Æ°á»£c sáº¯p xáº¿p tá»« ngÃ y má»›i nháº¥t Ä‘áº¿n cÅ© nháº¥t
- CÃ¡c giao dá»‹ch Ä‘Æ°á»£c nhÃ³m theo danh má»¥c
- Má»—i danh má»¥c cÃ³ hÃ ng **"Tá»•ng"** Ä‘á»ƒ tÃ­nh tá»•ng chi tiÃªu theo danh má»¥c

#### Biá»ƒu Äá»“ PhÃ¢n Bá»‘ Chi TiÃªu
Biá»ƒu Ä‘á»“ trÃ²n (doughnut) hiá»ƒn thá»‹:
- PhÃ¢n bá»‘ chi tiÃªu theo tá»«ng danh má»¥c
- Sá»‘ tiá»n vÃ  tá»· lá»‡ pháº§n trÄƒm cá»§a má»—i danh má»¥c
- GiÃºp báº¡n nhÃ¬n tháº¥y danh má»¥c nÃ o tiÃªu hao tiá»n nhiá»u nháº¥t

### Quay Láº¡i
Nháº¥p nÃºt **"â† Quay láº¡i"** Ä‘á»ƒ trá»Ÿ vá» trang thá»‘ng kÃª tuáº§n chÃ­nh.

## CÃ¡c Má»‘c Tuáº§n

CÃ¡c tuáº§n Ä‘Æ°á»£c chia nhÆ° sau:
- **Tuáº§n 1**: NgÃ y 1-7 cá»§a thÃ¡ng
- **Tuáº§n 2**: NgÃ y 8-14 cá»§a thÃ¡ng
- **Tuáº§n 3**: NgÃ y 15-21 cá»§a thÃ¡ng
- **Tuáº§n 4**: NgÃ y 22-cuá»‘i thÃ¡ng

## Máº¹o Sá»­ Dá»¥ng

1. **So sÃ¡nh theo thÃ¡ng**: Chá»n cÃ¡c thÃ¡ng khÃ¡c nhau Ä‘á»ƒ so sÃ¡nh hÃ nh vi chi tiÃªu
2. **XÃ¡c Ä‘á»‹nh thÃ¡ng cao Ä‘iá»ƒm**: Xem tá»•ng cá»™ng Ä‘á»ƒ biáº¿t thÃ¡ng nÃ o báº¡n chi tiÃªu nhiá»u nháº¥t
3. **PhÃ¢n tÃ­ch danh má»¥c**: VÃ o chi tiáº¿t tuáº§n Ä‘á»ƒ xem danh má»¥c nÃ o tiÃªu hao tiá»n nhiá»u
4. **Äáº·t má»¥c tiÃªu**: DÃ¹ng chÃªnh lá»‡ch tiáº¿t kiá»‡m/thÃ¢u chi Ä‘á»ƒ Ä‘áº·t má»¥c tiÃªu hÃ ng tuáº§n

## LÆ°u Ã Quan Trá»ng

- Dá»¯ liá»‡u Ä‘Æ°á»£c tÃ­nh tá»« báº£ng `DSTHUNHAP` (thu nháº­p) vÃ  `DSCHITIEU` (chi tiÃªu) trong cÆ¡ sá»Ÿ dá»¯ liá»‡u
- Chá»‰ hiá»ƒn thá»‹ dá»¯ liá»‡u cá»§a ngÆ°á»i dÃ¹ng Ä‘ang Ä‘Äƒng nháº­p
- Cáº§n pháº£i Ä‘Äƒng nháº­p Ä‘á»ƒ sá»­ dá»¥ng tÃ­nh nÄƒng nÃ y
- Äá»‹nh dáº¡ng tiá»n tá»‡: VND (Äá»“ng Viá»‡t Nam)
- Äá»‹nh dáº¡ng ngÃ y: DD/MM/YYYY

## CÃ¡c Tá»‡p LiÃªn Quan

### Controllers
- `sources/qlct/controllers/StatisticalController.php` - Xá»­ lÃ½ logic thá»‘ng kÃª

**Methods chÃ­nh:**
- `weeklyStatistics()` - Hiá»ƒn thá»‹ trang thá»‘ng kÃª tuáº§n
- `weeklyDetail()` - Hiá»ƒn thá»‹ chi tiáº¿t tuáº§n

### Models
- `sources/qlct/models/StatisticalModel.php` - Truy váº¥n dá»¯ liá»‡u

**Methods chÃ­nh:**
- `getWeeklyIncomeExpenseByMonth($makh, $year, $month)` - Láº¥y dá»¯ liá»‡u 4 tuáº§n
- `getWeeklyExpenseDetails($makh, $year, $month, $week)` - Láº¥y chi tiáº¿t tuáº§n
- `getMonthsWithTransactions($makh, $year)` - Láº¥y danh sÃ¡ch thÃ¡ng cÃ³ giao dá»‹ch

### Views
- `sources/qlct/views/thongke_chi_tieu_tuan_main.php` - Layout chÃ­nh
- `sources/qlct/views/thongke_chi_tieu_tuan.php` - Báº£ng thá»‘ng kÃª tuáº§n
- `sources/qlct/views/thongke_chi_tieu_tuan_detail.php` - Chi tiáº¿t tuáº§n

### Cáº­p nháº­t khÃ¡c
- `sources/qlct/views/layouts/sidebar.php` - Cáº­p nháº­t navigation
- `sources/qlct/views/baocao.php` - Cáº­p nháº­t nÃºt "Trong tuáº§n"

## CÆ¡ Sá»Ÿ Dá»¯ Liá»‡u

TÃ­nh nÄƒng nÃ y láº¥y dá»¯ liá»‡u tá»« cÃ¡c báº£ng:

1. **DSTHUNHAP** (Danh sÃ¡ch thu nháº­p)
   - `makh`: MÃ£ khÃ¡ch hÃ ng
   - `sotien`: Sá»‘ tiá»n thu nháº­p
   - `ngaythunhap`: NgÃ y thu nháº­p

2. **DSCHITIEU** (Danh sÃ¡ch chi tiÃªu)
   - `makh`: MÃ£ khÃ¡ch hÃ ng
   - `sotien`: Sá»‘ tiá»n chi tiÃªu
   - `ngaychitieu`: NgÃ y chi tiÃªu
   - `machitieu`: MÃ£ danh má»¥c chi tiÃªu
   - `ghichu`: Ghi chÃº

## Há»— Trá»£

Náº¿u gáº·p váº¥n Ä‘á»:
1. Kiá»ƒm tra xem báº¡n Ä‘Ã£ Ä‘Äƒng nháº­p chÆ°a
2. Kiá»ƒm tra xem dá»¯ liá»‡u chi tiÃªu Ä‘Ã£ Ä‘Æ°á»£c nháº­p chÆ°a
3. Kiá»ƒm tra xem nÄƒm vÃ  thÃ¡ng Ä‘Æ°á»£c chá»n cÃ³ há»£p lá»‡ khÃ´ng
4. Xem láº¡i cÃ¡c báº£n ghi chi tiÃªu trong trang "Khoáº£n chi"
